{"version":3,"sources":["src/react/create-element.js","src/react-dom/diff.js","src/react-dom/render.js","src/react-dom/index.js","src/react/component.js","src/react/index.js","src/index.js"],"names":["tag","attrs","children","diffNode","dom","vnode","out","undefined","nodeType","textContent","document","createTextNode","parentNode","replaceChild","diffComponent","isSameNodeType","createElement","length","childNodes","diffChildren","diffAttribute","vChildren","domChildren","keyed","Array","prototype","forEach","call","item","key","push","index","child","childrenLen","i","childNow","f","appendChild","nextSibling","removeNode","insertBefore","component","_component","oldDom","constructor","render","setComponentProps","base","unmountComponent","createComponent","componentWillUnmount","old","attributes","attr","name","value","setAttribute","Object","entries","val","nodeName","toLowerCase","container","ret","style","test","props","inst","defaultProps","assign","params","componentWillMount","componentWillReceiveProps","renderComponent","componentWillUpdate","componentDidMount","componentDidUpdate","innerHTML","renderObj","setStateQueue","renderQueue","enqueueSetState","stateChange","callback","setTimeout","flush","some","shift","prevState","state","ReactDom","Component","Show","num","App","setState","hello","React","ReactDOM","getElementById"],"mappings":"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","file":"src.a2b27638.map","sourceRoot":"..","sourcesContent":["export default (tag, attrs, ...children) => {\r\n  // if (typeof tag.props === 'object') {\r\n  //   Object.entries(tag.props).forEach(item => attrs[item[0]] = item[1])\r\n  // }\r\n  // console.log(tag, attrs, children)\r\n  return {\r\n    tag,\r\n    attrs,\r\n    children\r\n  }\r\n};","import render from './render';\r\n\r\nfunction diffNode(dom, vnode) {\r\n  // console.log(dom, vnode)\r\n  let out;\r\n  // 文本节点\r\n  if (vnode === null || vnode === undefined || typeof vnode === 'boolean') {\r\n    vnode = '';\r\n  }\r\n  if (typeof vnode === 'number') {\r\n    vnode = '' + vnode;\r\n  }\r\n  if (typeof vnode === 'string') {\r\n    if (dom && dom.nodeType === 3) {\r\n      if (dom.textContent !== vnode) {\r\n        dom.textContent = vnode;\r\n      }\r\n    } else {\r\n      out = document.createTextNode(vnode);\r\n      if (dom && dom.parentNode) {\r\n        dom.parentNode.replaceChild(out, dom);\r\n      }\r\n    }\r\n    return out;\r\n  }\r\n\r\n  let { tag, attrs } = vnode;\r\n  vnode.attrs = attrs || {};\r\n  // console.log(vnode)\r\n\r\n  // 组件节点\r\n  if (typeof tag === 'function') {\r\n    return diffComponent(dom, vnode);\r\n  }\r\n  \r\n  // 普通 html 节点类型\r\n  if (!dom || !isSameNodeType(dom, vnode)) {\r\n    out = document.createElement(tag);\r\n\r\n    if (dom) {\r\n      // 将 dom 节点中的子节点转到 out 中，以便后面更新\r\n      // Array.prototype.forEach.call(dom.childNodes, item => out.appendChild(item));\r\n\r\n      if (dom.parentNode) {\r\n        dom.parentNode.replaceChild(out, dom);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // 如果真实节点或者虚拟节点中有子节点，就需要更新\r\n  if (vnode.children && vnode.children.length > 0 || out.childNodes && out.childNodes.length > 0) {\r\n    diffChildren(out || dom, vnode);\r\n  }\r\n\r\n  // 属性更新\r\n  diffAttribute(out || dom, vnode);\r\n  return out || dom;\r\n}\r\n\r\nfunction diffChildren(dom, vChildren) {\r\n  const domChildren = dom.childNodes;\r\n  const keyed = {};\r\n  const children = [];\r\n\r\n  // 判断用户是否给组件设置了 key 值\r\n  Array.prototype.forEach.call(domChildren, item => {\r\n    const key = item.key;\r\n    if (key) {\r\n      keyed[key] = item;\r\n    } else {\r\n      children.push(item);\r\n    }\r\n  });\r\n\r\n  // 查找是否有相同 key 的组件\r\n  vChildren.children.forEach((item, index) => {\r\n    const { attrs } = item;\r\n    let child;\r\n\r\n    if (attrs && keyed[attrs.key]) {\r\n      child = keyed[attrs.key];\r\n      keyed[attrs.key] = undefined;\r\n    } else {\r\n      const childrenLen = children.length;\r\n      for (let i = 0; i < childrenLen; i++) {\r\n        const childNow = children[i];\r\n        if (childNow && isSameNodeType(childNow, item)) {\r\n          child = childNow;\r\n          children[i] = undefined;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    child = diffNode(child, item);\r\n\r\n    // 对元素的内容和顺序进行修改\r\n    const f = domChildren[index];\r\n    if (child && child !== dom && child !== f) {\r\n      if (!f) {\r\n        dom.appendChild(child);\r\n      // 如果更新后的节点和更新前对应位置的下一个节点一样，说明当前位置的节点被移除了\r\n      } else if (child === f.nextSibling) {\r\n        removeNode(f);\r\n      // 将更新后的节点移动到正确的位置\r\n      } else {\r\n        // 注意insertBefore的用法，第一个参数是要插入的节点，第二个参数是已存在的节点\r\n        dom.insertBefore( child, f );\r\n      }\r\n    }\r\n  })\r\n} \r\n\r\nfunction diffComponent(dom, vnode) {\r\n  // console.log(dom, vnode)\r\n  let component = dom && dom._component;\r\n  let oldDom = dom;\r\n  if (component && component.constructor === vnode.tag) {\r\n    render.setComponentProps(component, vnode.attrs);\r\n    dom = component.base;\r\n  } else {\r\n    if (component) {\r\n      unmountComponent(component);\r\n      oldDom = null;\r\n    }\r\n\r\n    component = render.createComponent(vnode.tag, vnode.attrs);\r\n    render.setComponentProps(component);\r\n    dom = component.base;\r\n\r\n    if ( oldDom && dom !== oldDom ) {\r\n      oldDom._component = null;\r\n      removeNode( oldDom );\r\n    }\r\n\r\n  }\r\n\r\n  return dom;\r\n}\r\n\r\n// 卸载组件\r\nfunction unmountComponent(component) {\r\n  if (component.componentWillUnmount) {\r\n    component.componentWillUnmount();\r\n  }\r\n  removeNode(component.base);\r\n}\r\n\r\nfunction diffAttribute(dom, vnode) {\r\n  const old = {};\r\n  const attrs = vnode.attrs || {};\r\n\r\n  // 将原节点的属性遍历存放\r\n  for (let i = 0; i < dom.attributes.length; i++) {\r\n    const attr = dom.attributes[i];\r\n    old[attr.name] = attr.value;\r\n  }\r\n\r\n  // 删除新的节点没有的属性\r\n  for (let key in old) {\r\n    if (!key in attrs) {\r\n      render.setAttribute(dom, key, undefined);\r\n    }\r\n  }\r\n\r\n  // 添加或修改属性\r\n  Object.entries(attrs).forEach(([key, val]) => {\r\n    if (old[key] !== val) {\r\n      render.setAttribute(dom, key, val);\r\n    }\r\n  });\r\n}\r\n\r\nfunction isSameNodeType( dom, vnode ) {\r\n  if ( typeof vnode === 'string' || typeof vnode === 'number' ) {\r\n    return dom.nodeType === 3;\r\n  }\r\n\r\n  if ( typeof vnode.tag === 'string' ) {\r\n    return dom.nodeName.toLowerCase() === vnode.tag.toLowerCase();\r\n  }\r\n  \r\n  return dom && dom._component && dom._component.constructor === vnode.tag;\r\n}\r\n\r\nexport default diffNode;","// import { Component } from '../react';\r\nimport diffNode from './diff';\r\n\r\nfunction render(vnode, container) {\r\n  // container.appendChild(_render(vnode));\r\n  const ret = diffNode(null, vnode);\r\n  if (container && ret.parentNode !== container) {\r\n    container.appendChild(ret);\r\n  }\r\n}\r\n\r\n// function _render(vnode) {\r\n//   // console.log(vnode)\r\n//   if (vnode === undefined || vnode === null || typeof vnode === 'boolean') {\r\n//     vnode = '';\r\n//   }\r\n//   if (typeof vnode === 'string' || typeof vnode === 'number') {\r\n//     return document.createTextNode(vnode);\r\n//   }\r\n\r\n//   let { tag, attrs, children } = vnode;\r\n//   attrs = attrs || {};\r\n\r\n//   // 组件渲染\r\n//   if (typeof tag === 'function') {\r\n//     const component = createComponent(tag, attrs);\r\n//     setComponentProps(component, attrs);\r\n//     return component.base;\r\n//   }\r\n  \r\n//   // 普通元素渲染\r\n//   const dom = document.createElement(tag);\r\n//   Object.entries(attrs).forEach(([key, val]) => setAttribute(dom, key, val));\r\n//   children.forEach(child => render(child, dom));\r\n//   return dom;\r\n// }\r\n\r\n// 为节点添加属性\r\nfunction setAttribute(dom, name, value) {\r\n  // 添加样式\r\n  if (name === 'style') {\r\n    return Object.entries(value).forEach(([key, val]) => dom .style[key] = typeof val === 'number' ? `${val}px` : val);\r\n  }\r\n\r\n  // 添加事件\r\n  if (/^on\\w+/.test(name)) {\r\n    name = name.toLowerCase();\r\n    return dom[name] = value || '';\r\n  }\r\n\r\n  // 添加 class\r\n  if (name === 'className') {\r\n    name = 'class';\r\n  }\r\n\r\n  dom.setAttribute(name, value)\r\n}\r\n\r\n// 创建组件\r\nfunction createComponent(component, props) {\r\n  let inst;\r\n  // console.log(component, props)\r\n  if (component.prototype && component.prototype.defaultProps) {\r\n    Object.assign(props, component.prototype.defaultProps);\r\n  }\r\n\r\n  if (component.prototype && component.prototype.render) {\r\n    inst = new component(props);\r\n  } else {\r\n    inst = new component(props);\r\n    inst.constructor = component;\r\n    inst.render = (params) => {\r\n      return inst.constructor(params || props);\r\n    }\r\n  }\r\n\r\n  return inst;\r\n}\r\n\r\nfunction setComponentProps(component, props) {\r\n  // console.log(component, props)\r\n  if (!component.base) {\r\n    if (component.componentWillMount) {\r\n      component.componentWillMount()\r\n    }\r\n  } else if (component.componentWillReceiveProps) {\r\n    component.componentWillReceiveProps(props);\r\n  }\r\n  \r\n  // console.log('renderC', component, component.render())\r\n  component.props = props;\r\n\r\n  renderComponent(component);\r\n}\r\n\r\nfunction renderComponent(component) {\r\n  // console.log(component)\r\n  const render = component.render(component.props);\r\n\r\n  if (component.base && component.componentWillUpdate) {\r\n    component.componentWillUpdate();\r\n  }\r\n\r\n  // const base = _render(render);\r\n  // console.log(render)\r\n  const base = diffNode(component.base, render);\r\n\r\n  if (!component.base) {\r\n    if (component.componentDidMount) {\r\n      component.componentDidMount();\r\n    }\r\n  } else if (component.componentDidUpdate) {\r\n    component.componentDidUpdate()\r\n  }\r\n\r\n  // if (component.base && component.base.parentNode) {\r\n  //   component.base.parentNode.replaceChild(base, component.base);\r\n  // }\r\n\r\n  component.base = base;\r\n  base._component = component;\r\n}\r\n\r\nexport default {\r\n  render: (vnode, container) => {\r\n    container.innerHTML = '';\r\n    return render(vnode, container);\r\n  },\r\n  renderComponent,\r\n  setAttribute,\r\n  setComponentProps,\r\n  createComponent\r\n}","import renderObj from './render';\r\nconst { render, renderComponent } = renderObj; \r\n\r\nexport default {\r\n  render,\r\n  renderComponent,\r\n}","import ReactDom from '../react-dom';\r\n\r\n// 存放一次循环中的 state 队列\r\nconst setStateQueue = [];\r\n// 存放需要更新的组件队列\r\nconst renderQueue = [];\r\n\r\nfunction enqueueSetState(stateChange, component, callback) {\r\n  if (setStateQueue.length === 0) {\r\n    setTimeout(flush);\r\n  }\r\n\r\n  setStateQueue.push({\r\n    stateChange,\r\n    component,\r\n    callback\r\n  });\r\n  \r\n  if (!renderQueue.some( item => item === component )) {\r\n    renderQueue.push(component);\r\n  }\r\n}\r\n\r\n// 清空 state 队列\r\nfunction flush() {\r\n  let item;\r\n\r\n  while (item = setStateQueue.shift()) {\r\n    let { stateChange, component, callback } = item;\r\n    if (!component.prevState) {\r\n      component.prevState = Object.assign({}, component.state);\r\n    }\r\n\r\n    if (typeof stateChange === 'function') {\r\n      Object.assign(component.state, stateChange(component.prevState, component.props));\r\n    } else {\r\n      Object.assign(component.state, stateChange);\r\n    }\r\n\r\n    component.prevState = component.state;\r\n\r\n    callback && callback.call(this);\r\n  }\r\n\r\n  // 渲染每一个组件\r\n  let component;\r\n  // console.log(renderQueue)\r\n  while( component = renderQueue.shift() ) {\r\n    // console.log(component.state)\r\n    ReactDom.renderComponent( component );\r\n  }\r\n  // console.log(renderQueue)\r\n}\r\n\r\nclass Component {\r\n  constructor(props = {}) {\r\n    this.state = {};\r\n    this.props = props;\r\n  }\r\n\r\n  setState(stateChange, callback) {\r\n    enqueueSetState(stateChange, this, callback);\r\n  }\r\n}\r\n\r\nexport default Component;","import createElement from './create-element';\r\nimport Component from './component';\r\n\r\nexport default {\r\n  createElement,\r\n  Component\r\n};\r\n\r\n","import React from './react';\r\nimport ReactDOM from './react-dom';\r\n\r\nfunction Show({ num }) {\r\n  // console.log(num)\r\n    return <h1>{num}</h1>\r\n}\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      num: 0\r\n    }\r\n  }\r\n\r\n  hello() {\r\n\r\n    // console.log(this.state.num)\r\n    this.setState({\r\n      num: this.state.num + 1\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      num: this.state.num + 1\r\n    })\r\n    this.setState({\r\n      num: this.state.num + 1\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const num = this.state.num\r\n    // console.log(num)\r\n    return (\r\n      <div className=\"App\" onClick={() => this.hello()}>\r\n        <Show num={num}></Show>\r\n        {/* <h1>{num}</h1> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById( 'root' )\r\n);\r\n\r\n"]}